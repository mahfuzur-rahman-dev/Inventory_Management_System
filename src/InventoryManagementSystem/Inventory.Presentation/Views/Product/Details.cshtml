@model Product

<div class="card container">
    <div class="card-header row">
        <div class="col-6">
            <h1>Product Detail</h1>
        </div>

    </div>

    <div class="card-body row">
        <!-- Left part: Product Name, Category, Description -->
        <div class="col-12 col-lg-8">
            <h4>Product name : <span class="text-primary text-decoration-underline" style="font:15px;">@Model.Name</span></h4>
            <h4>Product category: <span class="text-primary text-decoration-underline" style="font:15px;">@Model.Category.Name</span> </h4>
            <h4>Product Price: <span class="badge bg-danger">@Model.Price.ToString("c")</span> </h4>
            <p class="mt-3">
                @(Model.Description.Length > 200
                    ? Model.Description.Substring(0, 200) + "..."
                    : Model.Description)
            </p>

        </div>

        <!-- Right part: Product Image -->
        <div class="col-12 col-lg-4 text-center">
            <img class="img-fluid rounded" src="~/images/product1.jpeg" alt="@Model.Name" style="height: 200px; width: 70%; object-fit: cover;" />
        </div>
        <div class="row pl-2">
            <h4 class="form-label">Order quantity</h4>
            <div class="col-1 text-primary"><h4>Count</h4></div>
            <div class="col-11"><input id="orderCount" class="form-control" /></div>
        </div>

    </div>

    <div class="card-footer row">
        <div class="col-12 col-md-6 mb-2">
            <a asp-controller="Product" asp-action="AllProducts" class="btn btn-success form-control py-2">Back to List</a>
        </div>
        <div class="col-12 col-md-6">
            <button onclick=" return placeOrder('@Model.Id')" type="button" class="btn btn-primary form-control py-2">Place order</button>
        </div>
    </div>
</div>


<script type="text/javascript">

    function placeOrder(id) {

        let count = $('#orderCount').val();
        let productId = id; // Assuming you have the Product ID available in the model

        if (count == null || count == 0) {
            Swal.fire({
                icon: "error",
                title: "Oops...",
                text: "Order amount cannont be empmty",
            });
            return false;
        }

        $.ajax({
            url: '@Url.Action("Index", "Product")', // Action to handle the order
            type: 'POST',
            data: {
                count: count,
                productId: productId
            },
            success: function (response) {
                if (response.success) {
                    alert('Order placed successfully!');
                } else {
                    alert('Failed to place the order.');
                }
            },
            error: function () {
                alert('Error occurred while placing the order.');
            }
        });
    }
          
</script>